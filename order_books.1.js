'use strict'

process.env.DEBUG = 'bfx:examples:*'

const debug = require('debug')('bfx:examples:ws2_order_books')
const bfx = require('bitfinex-api-node')
//const bfxapi = require ('bitfinex-api-node')
//const bfxws = new bfxapi({ apiKey: '', apiSecret: '' })

const log = require ('ololog').noLocate
const ansi = require ('ansicolor').nice
const style = require ('ansi-styles')
const chalk = require ('chalk')

//Pair Arrays
//Need to use public API to update pairs automatically, filter out symbols that dont have multiple pairs to arb on.
const tpairs = 
["tBTCUSD","tLTCUSD","tLTCBTC","tETHUSD","tETHBTC","tETCBTC","tETCUSD","tRRTUSD","tRRTBTC","tZECUSD","tZECBTC","tXMRUSD","tXMRBTC","tDSHUSD","tDSHBTC","tBTCEUR","tBTCJPY","tXRPUSD","tXRPBTC","tIOTUSD","tIOTBTC","tIOTETH","tEOSUSD","tEOSBTC","tEOSETH","tSANUSD","tSANBTC","tSANETH","tOMGUSD","tOMGBTC","tOMGETH","tNEOUSD","tNEOBTC","tNEOETH","tETPUSD","tETPBTC","tETPETH","tQTMUSD","tQTMBTC","tQTMETH","tAVTUSD","tAVTBTC","tAVTETH","tEDOUSD","tEDOBTC","tEDOETH","tBTGUSD","tBTGBTC","tDATUSD","tDATBTC","tDATETH","tQSHUSD","tQSHBTC","tQSHETH","tYYWUSD","tYYWBTC","tYYWETH","tGNTUSD","tGNTBTC","tGNTETH","tSNTUSD","tSNTBTC","tSNTETH","tIOTEUR","tBATUSD","tBATBTC","tBATETH","tMNAUSD","tMNABTC","tMNAETH","tFUNUSD","tFUNBTC","tFUNETH","tZRXUSD","tZRXBTC","tZRXETH","tTNBUSD","tTNBBTC","tTNBETH","tSPKUSD","tSPKBTC","tSPKETH","tTRXUSD","tTRXBTC","tTRXETH","tRCNUSD","tRCNBTC","tRCNETH","tRLCUSD","tRLCBTC","tRLCETH","tAIDUSD","tAIDBTC","tAIDETH","tSNGUSD","tSNGBTC","tSNGETH","tREPUSD","tREPBTC","tREPETH","tELFUSD","tELFBTC","tELFETH","tBTCGBP","tETHEUR","tETHJPY","tETHGBP","tNEOEUR","tNEOJPY","tNEOGBP","tEOSEUR","tEOSJPY","tEOSGBP","tIOTJPY","tIOTGBP","tIOSUSD","tIOSBTC","tIOSETH","tAIOUSD","tAIOBTC","tAIOETH","tREQUSD","tREQBTC","tREQETH","tRDNUSD","tRDNBTC","tRDNETH","tLRCUSD","tLRCBTC","tLRCETH","tWAXUSD","tWAXBTC","tWAXETH","tDAIUSD","tDAIBTC","tDAIETH","tAGIUSD","tAGIBTC","tAGIETH","tBFTUSD","tBFTBTC","tBFTETH","tMTNUSD","tMTNBTC","tMTNETH","tODEUSD","tODEBTC","tODEETH","tANTUSD","tANTBTC","tANTETH","tDTHUSD","tDTHBTC","tDTHETH","tMITUSD","tMITBTC","tMITETH","tSTJUSD","tSTJBTC","tSTJETH","tXLMUSD","tXLMEUR","tXLMJPY","tXLMGBP","tXLMBTC","tXLMETH","tXVGUSD","tXVGEUR","tXVGJPY","tXVGGBP","tXVGBTC","tXVGETH","tBCIUSD","tBCIBTC","tMKRUSD","tMKRBTC","tMKRETH","tKNCUSD","tKNCBTC","tKNCETH","tPOAUSD","tPOABTC","tPOAETH","tLYMUSD","tLYMBTC","tLYMETH","tUTKUSD","tUTKBTC","tUTKETH","tVEEUSD","tVEEBTC","tVEEETH","tDADUSD","tDADBTC","tDADETH","tORSUSD","tORSBTC","tORSETH","tAUCUSD","tAUCBTC","tAUCETH","tPOYUSD","tPOYBTC","tPOYETH","tFSNUSD","tFSNBTC","tFSNETH","tCBTUSD","tCBTBTC","tCBTETH","tZCNUSD","tZCNBTC","tZCNETH","tSENUSD","tSENBTC","tSENETH","tNCAUSD","tNCABTC","tNCAETH","tCNDUSD","tCNDBTC","tCNDETH","tCTXUSD","tCTXBTC","tCTXETH","tPAIUSD","tPAIBTC","tSEEUSD","tSEEBTC","tSEEETH","tESSUSD","tESSBTC","tESSETH","tATMUSD","tATMBTC","tATMETH","tHOTUSD","tHOTBTC","tHOTETH","tDTAUSD","tDTABTC","tDTAETH","tIQXUSD","tIQXBTC","tIQXEOS","tWPRUSD","tWPRBTC","tWPRETH","tZILUSD","tZILBTC","tZILETH","tBNTUSD","tBNTBTC","tBNTETH","tABSUSD","tABSETH","tXRAUSD","tXRAETH","tMANUSD","tMANETH","tBBNUSD","tBBNETH","tNIOUSD","tNIOETH","tDGXUSD","tDGXETH","tVETUSD","tVETBTC","tVETETH","tUTNUSD","tUTNETH","tTKNUSD","tTKNETH","tGOTUSD","tGOTEUR","tGOTETH","tXTZUSD","tXTZBTC","tCNNUSD","tCNNETH","tBOXUSD","tBOXETH","tTRXEUR","tTRXGBP","tTRXJPY","tMGOUSD","tMGOETH","tRTEUSD","tRTEETH","tYGGUSD","tYGGETH","tMLNUSD","tMLNETH","tWTCUSD","tWTCETH","tCSXUSD","tCSXETH","tOMNUSD","tOMNBTC","tINTUSD","tINTETH","tDRNUSD","tDRNETH","tPNKUSD","tPNKETH","tDGBUSD","tDGBBTC","tBSVUSD","tBSVBTC","tBABUSD","tBABBTC","tWLOUSD","tWLOXLM","tVLDUSD","tVLDETH","tENJUSD","tENJETH","tONLUSD","tONLETH","tRBTUSD","tRBTBTC","tUSTUSD","tEUTEUR","tEUTUSD","tGSDUSD","tUDCUSD","tTSDUSD","tPAXUSD"]
var symbolOB = 
{"tBTCUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tLTCUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tLTCBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tETHUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tETHBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tETCBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tETCUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tRRTUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tRRTBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tZECUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tZECBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tXMRUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tXMRBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tDSHUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tDSHBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tBTCEUR": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tBTCJPY": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tXRPUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tXRPBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tIOTUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tIOTBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tIOTETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tEOSUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tEOSBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tEOSETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tSANUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tSANBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tSANETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tOMGUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tOMGBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tOMGETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tNEOUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tNEOBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tNEOETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tETPUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tETPBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tETPETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tQTMUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tQTMBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tQTMETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tAVTUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tAVTBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tAVTETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tEDOUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tEDOBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tEDOETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tBTGUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tBTGBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tDATUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tDATBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tDATETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tQSHUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tQSHBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tQSHETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tYYWUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tYYWBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tYYWETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tGNTUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tGNTBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tGNTETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tSNTUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tSNTBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tSNTETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tIOTEUR": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tBATUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tBATBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tBATETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tMNAUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tMNABTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tMNAETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tFUNUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tFUNBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tFUNETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tZRXUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tZRXBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tZRXETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tTNBUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tTNBBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tTNBETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tSPKUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tSPKBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tSPKETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tTRXUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tTRXBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tTRXETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tRCNUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tRCNBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tRCNETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tRLCUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tRLCBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tRLCETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tAIDUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tAIDBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tAIDETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tSNGUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tSNGBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tSNGETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tREPUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tREPBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tREPETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tELFUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tELFBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tELFETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tBTCGBP": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tETHEUR": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tETHJPY": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tETHGBP": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tNEOEUR": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tNEOJPY": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tNEOGBP": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tEOSEUR": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tEOSJPY": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tEOSGBP": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tIOTJPY": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tIOTGBP": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tIOSUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tIOSBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tIOSETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tAIOUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tAIOBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tAIOETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tREQUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tREQBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tREQETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tRDNUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tRDNBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tRDNETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tLRCUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tLRCBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tLRCETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tWAXUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tWAXBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tWAXETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tDAIUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tDAIBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tDAIETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tCFIUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tCFIBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tCFIETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tAGIUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tAGIBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tAGIETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tBFTUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tBFTBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tBFTETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tMTNUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tMTNBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tMTNETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tODEUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tODEBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tODEETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tANTUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tANTBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tANTETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tDTHUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tDTHBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tDTHETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tMITUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tMITBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tMITETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tSTJUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tSTJBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tSTJETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tXLMUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tXLMEUR": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tXLMJPY": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tXLMGBP": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tXLMBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tXLMETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tXVGUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tXVGEUR": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tXVGJPY": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tXVGGBP": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tXVGBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tXVGETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tBCIUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tBCIBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tMKRUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tMKRBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tMKRETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tKNCUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tKNCBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tKNCETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tPOAUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tPOABTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tPOAETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tLYMUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tLYMBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tLYMETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tUTKUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tUTKBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tUTKETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tVEEUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tVEEBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tVEEETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tDADUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tDADBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tDADETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tORSUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tORSBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tORSETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tAUCUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tAUCBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tAUCETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tPOYUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tPOYBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tPOYETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tFSNUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tFSNBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tFSNETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tCBTUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tCBTBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tCBTETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tZCNUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tZCNBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tZCNETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tSENUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tSENBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tSENETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tNCAUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tNCABTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tNCAETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tCNDUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tCNDBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tCNDETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tCTXUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tCTXBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tCTXETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tPAIUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tPAIBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tSEEUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tSEEBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tSEEETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tESSUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tESSBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tESSETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tATMUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tATMBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tATMETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tHOTUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tHOTBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tHOTETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tDTAUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tDTABTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tDTAETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tIQXUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tIQXBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tIQXEOS": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tWPRUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tWPRBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tWPRETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tZILUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tZILBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tZILETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tBNTUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tBNTBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tBNTETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tABSUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tABSETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tXRAUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tXRAETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tMANUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tMANETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tBBNUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tBBNETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tNIOUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tNIOETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tDGXUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tDGXETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tVETUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tVETBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tVETETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tUTNUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tUTNETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tTKNUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tTKNETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tGOTUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tGOTEUR": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tGOTETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tXTZUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tXTZBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tCNNUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tCNNETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tBOXUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tBOXETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tTRXEUR": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tTRXGBP": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tTRXJPY": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tMGOUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tMGOETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tRTEUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tRTEETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tYGGUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tYGGETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tMLNUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tMLNETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tWTCUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tWTCETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tCSXUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tCSXETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tOMNUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tOMNBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tINTUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tINTETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tDRNUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tDRNETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tPNKUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tPNKETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tDGBUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tDGBBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tBSVUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tBSVBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tBABUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tBABBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tWLOUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tWLOXLM": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tVLDUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tVLDETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tENJUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tENJETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tONLUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tONLETH": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tRBTUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tRBTBTC": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tUSTUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tEUTEUR": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tEUTUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tGSDUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tUDCUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tTSDUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]},"tPAXUSD": {bids:[], asks:[], midprice:[], lastmidprice:[]}
}
const ethPairs = 
["tAGIETH","tAIDETH","tAIOETH","tANTETH","tATMETH","tAUCETH","tAVTETH","tBATETH","tBFTETH","tBNTETH","tCBTETH", "tCNDETH","tCTXETH","tDADETH","tDAIETH","tDATETH","tDTAETH","tDTHETH","tEDOETH","tELFETH","tEOSETH","tESSETH","tETPETH","tFSNETH","tFUNETH","tGNTETH","tHOTETH","tIOSETH","tIOTETH","tKNCETH","tLRCETH","tLYMETH","tMITETH","tMKRETH","tMNAETH","tMTNETH","tNCAETH","tNEOETH","tODEETH","tOMGETH","tORSETH","tPOAETH","tPOYETH","tQSHETH","tQTMETH","tRCNETH","tRDNETH","tREPETH","tREQETH","tRLCETH","tSANETH","tSEEETH","tSENETH","tSNGETH","tSNTETH","tSPKETH","tSTJETH","tTNBETH","tTRXETH","tUTKETH","tVEEETH","tVETETH","tWAXETH","tWPRETH","tXLMETH","tXVGETH","tYYWETH","tZCNETH","tZILETH"]
const btcPairs = 
["tAGIBTC","tAIDBTC","tAIOBTC","tANTBTC","tATMBTC","tAUCBTC","tAVTBTC","tBATBTC","tBFTBTC","tBNTBTC","tCBTBTC", "tCNDBTC","tCTXBTC","tDADBTC","tDAIBTC","tDATBTC","tDTABTC","tDTHBTC","tEDOBTC","tELFBTC","tEOSBTC","tESSBTC","tETPBTC","tFSNBTC","tFUNBTC","tGNTBTC","tHOTBTC","tIOSBTC","tIOTBTC","tKNCBTC","tLRCBTC","tLYMBTC","tMITBTC","tMKRBTC","tMNABTC","tMTNBTC","tNCABTC","tNEOBTC","tODEBTC","tOMGBTC","tORSBTC","tPOABTC","tPOYBTC","tQSHBTC","tQTMBTC","tRCNBTC","tRDNBTC","tREPBTC","tREQBTC","tRLCBTC","tSANBTC","tSEEBTC","tSENBTC","tSNGBTC","tSNTBTC","tSPKBTC","tSTJBTC","tTNBBTC","tTRXBTC","tUTKBTC","tVEEBTC","tVETBTC","tWAXBTC","tWPRBTC","tXLMBTC","tXVGBTC","tYYWBTC","tZCNBTC","tZILBTC"]

var arbTrades = 
{"tBTCUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tLTCUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tLTCBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tETHUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tETHBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tETCBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tETCUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tRRTUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tRRTBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tZECUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tZECBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tXMRUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tXMRBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tDSHUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tDSHBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tBTCEUR": {p1:[], p2:[], p3:[], minAmount:[]},"tBTCJPY": {p1:[], p2:[], p3:[], minAmount:[]},"tXRPUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tXRPBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tIOTUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tIOTBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tIOTETH": {p1:[], p2:[], p3:[], minAmount:[]},"tEOSUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tEOSBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tEOSETH": {p1:[], p2:[], p3:[], minAmount:[]},"tSANUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tSANBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tSANETH": {p1:[], p2:[], p3:[], minAmount:[]},"tOMGUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tOMGBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tOMGETH": {p1:[], p2:[], p3:[], minAmount:[]},"tNEOUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tNEOBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tNEOETH": {p1:[], p2:[], p3:[], minAmount:[]},"tETPUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tETPBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tETPETH": {p1:[], p2:[], p3:[], minAmount:[]},"tQTMUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tQTMBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tQTMETH": {p1:[], p2:[], p3:[], minAmount:[]},"tAVTUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tAVTBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tAVTETH": {p1:[], p2:[], p3:[], minAmount:[]},"tEDOUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tEDOBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tEDOETH": {p1:[], p2:[], p3:[], minAmount:[]},"tBTGUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tBTGBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tDATUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tDATBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tDATETH": {p1:[], p2:[], p3:[], minAmount:[]},"tQSHUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tQSHBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tQSHETH": {p1:[], p2:[], p3:[], minAmount:[]},"tYYWUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tYYWBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tYYWETH": {p1:[], p2:[], p3:[], minAmount:[]},"tGNTUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tGNTBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tGNTETH": {p1:[], p2:[], p3:[], minAmount:[]},"tSNTUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tSNTBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tSNTETH": {p1:[], p2:[], p3:[], minAmount:[]},"tIOTEUR": {p1:[], p2:[], p3:[], minAmount:[]},"tBATUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tBATBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tBATETH": {p1:[], p2:[], p3:[], minAmount:[]},"tMNAUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tMNABTC": {p1:[], p2:[], p3:[], minAmount:[]},"tMNAETH": {p1:[], p2:[], p3:[], minAmount:[]},"tFUNUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tFUNBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tFUNETH": {p1:[], p2:[], p3:[], minAmount:[]},"tZRXUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tZRXBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tZRXETH": {p1:[], p2:[], p3:[], minAmount:[]},"tTNBUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tTNBBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tTNBETH": {p1:[], p2:[], p3:[], minAmount:[]},"tSPKUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tSPKBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tSPKETH": {p1:[], p2:[], p3:[], minAmount:[]},"tTRXUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tTRXBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tTRXETH": {p1:[], p2:[], p3:[], minAmount:[]},"tRCNUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tRCNBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tRCNETH": {p1:[], p2:[], p3:[], minAmount:[]},"tRLCUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tRLCBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tRLCETH": {p1:[], p2:[], p3:[], minAmount:[]},"tAIDUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tAIDBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tAIDETH": {p1:[], p2:[], p3:[], minAmount:[]},"tSNGUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tSNGBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tSNGETH": {p1:[], p2:[], p3:[], minAmount:[]},"tREPUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tREPBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tREPETH": {p1:[], p2:[], p3:[], minAmount:[]},"tELFUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tELFBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tELFETH": {p1:[], p2:[], p3:[], minAmount:[]},"tBTCGBP": {p1:[], p2:[], p3:[], minAmount:[]},"tETHEUR": {p1:[], p2:[], p3:[], minAmount:[]},"tETHJPY": {p1:[], p2:[], p3:[], minAmount:[]},"tETHGBP": {p1:[], p2:[], p3:[], minAmount:[]},"tNEOEUR": {p1:[], p2:[], p3:[], minAmount:[]},"tNEOJPY": {p1:[], p2:[], p3:[], minAmount:[]},"tNEOGBP": {p1:[], p2:[], p3:[], minAmount:[]},"tEOSEUR": {p1:[], p2:[], p3:[], minAmount:[]},"tEOSJPY": {p1:[], p2:[], p3:[], minAmount:[]},"tEOSGBP": {p1:[], p2:[], p3:[], minAmount:[]},"tIOTJPY": {p1:[], p2:[], p3:[], minAmount:[]},"tIOTGBP": {p1:[], p2:[], p3:[], minAmount:[]},"tIOSUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tIOSBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tIOSETH": {p1:[], p2:[], p3:[], minAmount:[]},"tAIOUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tAIOBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tAIOETH": {p1:[], p2:[], p3:[], minAmount:[]},"tREQUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tREQBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tREQETH": {p1:[], p2:[], p3:[], minAmount:[]},"tRDNUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tRDNBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tRDNETH": {p1:[], p2:[], p3:[], minAmount:[]},"tLRCUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tLRCBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tLRCETH": {p1:[], p2:[], p3:[], minAmount:[]},"tWAXUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tWAXBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tWAXETH": {p1:[], p2:[], p3:[], minAmount:[]},"tDAIUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tDAIBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tDAIETH": {p1:[], p2:[], p3:[], minAmount:[]},"tCFIUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tCFIBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tCFIETH": {p1:[], p2:[], p3:[], minAmount:[]},"tAGIUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tAGIBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tAGIETH": {p1:[], p2:[], p3:[], minAmount:[]},"tBFTUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tBFTBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tBFTETH": {p1:[], p2:[], p3:[], minAmount:[]},"tMTNUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tMTNBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tMTNETH": {p1:[], p2:[], p3:[], minAmount:[]},"tODEUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tODEBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tODEETH": {p1:[], p2:[], p3:[], minAmount:[]},"tANTUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tANTBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tANTETH": {p1:[], p2:[], p3:[], minAmount:[]},"tDTHUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tDTHBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tDTHETH": {p1:[], p2:[], p3:[], minAmount:[]},"tMITUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tMITBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tMITETH": {p1:[], p2:[], p3:[], minAmount:[]},"tSTJUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tSTJBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tSTJETH": {p1:[], p2:[], p3:[], minAmount:[]},"tXLMUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tXLMEUR": {p1:[], p2:[], p3:[], minAmount:[]},"tXLMJPY": {p1:[], p2:[], p3:[], minAmount:[]},"tXLMGBP": {p1:[], p2:[], p3:[], minAmount:[]},"tXLMBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tXLMETH": {p1:[], p2:[], p3:[], minAmount:[]},"tXVGUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tXVGEUR": {p1:[], p2:[], p3:[], minAmount:[]},"tXVGJPY": {p1:[], p2:[], p3:[], minAmount:[]},"tXVGGBP": {p1:[], p2:[], p3:[], minAmount:[]},"tXVGBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tXVGETH": {p1:[], p2:[], p3:[], minAmount:[]},"tBCIUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tBCIBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tMKRUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tMKRBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tMKRETH": {p1:[], p2:[], p3:[], minAmount:[]},"tKNCUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tKNCBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tKNCETH": {p1:[], p2:[], p3:[], minAmount:[]},"tPOAUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tPOABTC": {p1:[], p2:[], p3:[], minAmount:[]},"tPOAETH": {p1:[], p2:[], p3:[], minAmount:[]},"tLYMUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tLYMBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tLYMETH": {p1:[], p2:[], p3:[], minAmount:[]},"tUTKUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tUTKBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tUTKETH": {p1:[], p2:[], p3:[], minAmount:[]},"tVEEUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tVEEBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tVEEETH": {p1:[], p2:[], p3:[], minAmount:[]},"tDADUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tDADBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tDADETH": {p1:[], p2:[], p3:[], minAmount:[]},"tORSUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tORSBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tORSETH": {p1:[], p2:[], p3:[], minAmount:[]},"tAUCUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tAUCBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tAUCETH": {p1:[], p2:[], p3:[], minAmount:[]},"tPOYUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tPOYBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tPOYETH": {p1:[], p2:[], p3:[], minAmount:[]},"tFSNUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tFSNBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tFSNETH": {p1:[], p2:[], p3:[], minAmount:[]},"tCBTUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tCBTBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tCBTETH": {p1:[], p2:[], p3:[], minAmount:[]},"tZCNUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tZCNBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tZCNETH": {p1:[], p2:[], p3:[], minAmount:[]},"tSENUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tSENBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tSENETH": {p1:[], p2:[], p3:[], minAmount:[]},"tNCAUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tNCABTC": {p1:[], p2:[], p3:[], minAmount:[]},"tNCAETH": {p1:[], p2:[], p3:[], minAmount:[]},"tCNDUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tCNDBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tCNDETH": {p1:[], p2:[], p3:[], minAmount:[]},"tCTXUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tCTXBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tCTXETH": {p1:[], p2:[], p3:[], minAmount:[]},"tPAIUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tPAIBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tSEEUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tSEEBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tSEEETH": {p1:[], p2:[], p3:[], minAmount:[]},"tESSUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tESSBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tESSETH": {p1:[], p2:[], p3:[], minAmount:[]},"tATMUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tATMBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tATMETH": {p1:[], p2:[], p3:[], minAmount:[]},"tHOTUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tHOTBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tHOTETH": {p1:[], p2:[], p3:[], minAmount:[]},"tDTAUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tDTABTC": {p1:[], p2:[], p3:[], minAmount:[]},"tDTAETH": {p1:[], p2:[], p3:[], minAmount:[]},"tIQXUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tIQXBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tIQXEOS": {p1:[], p2:[], p3:[], minAmount:[]},"tWPRUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tWPRBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tWPRETH": {p1:[], p2:[], p3:[], minAmount:[]},"tZILUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tZILBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tZILETH": {p1:[], p2:[], p3:[], minAmount:[]},"tBNTUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tBNTBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tBNTETH": {p1:[], p2:[], p3:[], minAmount:[]},"tABSUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tABSETH": {p1:[], p2:[], p3:[], minAmount:[]},"tXRAUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tXRAETH": {p1:[], p2:[], p3:[], minAmount:[]},"tMANUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tMANETH": {p1:[], p2:[], p3:[], minAmount:[]},"tBBNUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tBBNETH": {p1:[], p2:[], p3:[], minAmount:[]},"tNIOUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tNIOETH": {p1:[], p2:[], p3:[], minAmount:[]},"tDGXUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tDGXETH": {p1:[], p2:[], p3:[], minAmount:[]},"tVETUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tVETBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tVETETH": {p1:[], p2:[], p3:[], minAmount:[]},"tUTNUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tUTNETH": {p1:[], p2:[], p3:[], minAmount:[]},"tTKNUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tTKNETH": {p1:[], p2:[], p3:[], minAmount:[]},"tGOTUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tGOTEUR": {p1:[], p2:[], p3:[], minAmount:[]},"tGOTETH": {p1:[], p2:[], p3:[], minAmount:[]},"tXTZUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tXTZBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tCNNUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tCNNETH": {p1:[], p2:[], p3:[], minAmount:[]},"tBOXUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tBOXETH": {p1:[], p2:[], p3:[], minAmount:[]},"tTRXEUR": {p1:[], p2:[], p3:[], minAmount:[]},"tTRXGBP": {p1:[], p2:[], p3:[], minAmount:[]},"tTRXJPY": {p1:[], p2:[], p3:[], minAmount:[]},"tMGOUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tMGOETH": {p1:[], p2:[], p3:[], minAmount:[]},"tRTEUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tRTEETH": {p1:[], p2:[], p3:[], minAmount:[]},"tYGGUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tYGGETH": {p1:[], p2:[], p3:[], minAmount:[]},"tMLNUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tMLNETH": {p1:[], p2:[], p3:[], minAmount:[]},"tWTCUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tWTCETH": {p1:[], p2:[], p3:[], minAmount:[]},"tCSXUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tCSXETH": {p1:[], p2:[], p3:[], minAmount:[]},"tOMNUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tOMNBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tINTUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tINTETH": {p1:[], p2:[], p3:[], minAmount:[]},"tDRNUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tDRNETH": {p1:[], p2:[], p3:[], minAmount:[]},"tPNKUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tPNKETH": {p1:[], p2:[], p3:[], minAmount:[]},"tDGBUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tDGBBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tBSVUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tBSVBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tBABUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tBABBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tWLOUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tWLOXLM": {p1:[], p2:[], p3:[], minAmount:[]},"tVLDUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tVLDETH": {p1:[], p2:[], p3:[], minAmount:[]},"tENJUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tENJETH": {p1:[], p2:[], p3:[], minAmount:[]},"tONLUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tONLETH": {p1:[], p2:[], p3:[], minAmount:[]},"tRBTUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tRBTBTC": {p1:[], p2:[], p3:[], minAmount:[]},"tUSTUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tEUTEUR": {p1:[], p2:[], p3:[], minAmount:[]},"tEUTUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tGSDUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tUDCUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tTSDUSD": {p1:[], p2:[], p3:[], minAmount:[]},"tPAXUSD":{p1:[], p2:[], p3:[], minAmount:[]}
}

const ws = bfx.ws(2, {
  manageOrderBooks: true, // tell the ws client to maintain full sorted OBs
  transform: true // auto-transform array OBs to OrderBook objects
})

ws.on('error', (err) => {
  debug('error: %j', err)
})

ws.on('open', () => {
  debug('open')
  //ws.auth()
  tpairs.forEach(pair => {
    ws.subscribeOrderBook(pair)
    debug(pair)
  });
})

let arbCalc = function (p1,p2){
  try{
  let p3 = 'tETHBTC'
  let pair1ask = symbolOB[p1]['asks'][0]
  let pair2bid = symbolOB[p2]['bids'][0]
  let pair3ask = symbolOB[p3]['asks'][0] //Pair constraint

  let profit = 0.0 //percentage of profit required to trigger,  
  let crossrate = ((1/pair1ask[0]) * pair2bid[0]) / pair3ask[0] 
  let perc = 1 - crossrate

  let minAmount = Math.min((pair1ask[2]),(pair2bid[2]))
  let minETHAmount = (pair3ask[2]/pair1ask[0])

  let symbols_string = String(p1) + ' > ' + String(p2) + ' > ' + String(p3) + ' | '
  let alt_amount = String(arbTrades[p1]['minAmount']*-1) + ' ' + (minETHAmount*-1).toFixed(3)
  let bidask_string = String(pair1ask[0].toFixed(6)) + ' ' + String(pair2bid[0].toFixed(6)) + ' ' + chalk.bold(String(pair3ask[0].toFixed(6)))
  let crossrate_string = crossrate.toFixed(8).toString()

  // arbTrade array
  arbTrades[p1]['p1'] = pair1ask
  arbTrades[p1]['p2'] = pair2bid
  arbTrades[p1]['p3'] = pair3ask
  arbTrades[p1]['minAmount'] = minAmount

  if(crossrate >= (1 + profit)){
    
    debug(symbols_string.green, chalk.bold(alt_amount) , '(' , pair3ask[2]*-1 ,'ETH )' ,'->',bidask_string, chalk.magenta('crossrate:'), chalk.bold.yellow(crossrate_string))
    //debug(p1,arbTrades[p1]['p1'][2],p2,arbTrades[p1]['p2'][2],p3,arbTrades[p1]['p3'][2],'minAmount',minAmount)
  }
  else{

    debug(symbols_string.green, chalk.bold(alt_amount), '(' , pair3ask[2]*-1 ,'ETH )' , '->',bidask_string, chalk.magenta('crossrate:'), chalk.red.bold(crossrate_string))
    //console.log(symbols_string.green +  chalk.bold(alt_amount) + ' -> ' + bidask_string + ' crossrate:'.red +  crossrate.toFixed(8).toString().red) 
    //debug(p1,arbTrades[p1]['p1'][2],p2,arbTrades[p1]['p2'][2],p3,arbTrades[p1]['p3'][2],'minAmount',minAmount)
  }  
  //Need to add trading fees func
  }
  catch(err){
    let errmsg = String(p1) + ' - ' + String(p2) + ': ' + err.message + '. SymbolOB array still updating'
    debug(errmsg.yellow)
  }
}

// 'ob' is a full OrderBook instance, with sorted arrays 'bids' & 'asks'   
tpairs.forEach(symbol => {

    symbolOB[symbol]['lastmidprice'] = -1
    let sub = symbol.substring(4) //Last 3 chars of symbol, 'ETH' 'BTC' 'USD' etc

  ws.onOrderBook({ symbol, precision:"P4" }, async (ob) => {

    symbolOB[symbol]['midprice'] = ob.midPrice()  
    symbolOB[symbol]['bids'] = ob.bids
    symbolOB[symbol]['asks'] = ob.asks

    while(symbolOB[symbol]['midprice'] !== symbolOB[symbol]['lastmidprice'] && sub == "ETH"){

      //Pair grouping, check first 4 letters of symbol then group with the other two by replacing substring.
      let p1 = symbol
      let p2
      sub == "ETH" ? p2 = p1.replace(sub,"BTC") : null //Only looking for ETH pairs, optimize array when arbcalc is done

      //if conditions dont even work?? 
      if(symbolOB[p1]['asks'][0] !== null && symbolOB[p2]['bids'][0] !== null && symbolOB['tETHBTC']['bids'][0] !== null ){
        arbCalc(p1,p2)
      }
      symbolOB[symbol]['lastmidprice'] = symbolOB[symbol]['midprice'] //Set lastmidprice
      }
    })
  })
log("Finished!".green)//Finished symbolOB loop

ws.open()